<!DOCTYPE html>
<html lang="en">
<head>
    <title>Borrowing Status : Ameya</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="never">

    <meta name="publisher" content="dataworx">
    <meta name="copyright" content="Copyright ©2016 UASB">

    <link rel="shortcut icon" href="images/icons/favicon.ico">
    <link rel="apple-touch-icon" href="images/icons/favicon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/icons/favicon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/icons/favicon-114x114.png">

    <!-- bootstrap stylesheets -->
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,700">
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Oswald:400,700,300">
    <link type="text/css" rel="stylesheet" href="vendors/jquery-ui-1.10.4.custom/css/ui-lightness/jquery-ui-1.10.4.custom.min.css">
    <link type="text/css" rel="stylesheet" href="vendors/font-awesome/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="vendors/bootstrap/css/bootstrap.min.css">

    <!-- vendors stylesheets -->
    <link type="text/css" rel="stylesheet" href="vendors/animate.css/animate.css">
    <link type="text/css" rel="stylesheet" href="vendors/jquery-pace/pace.css">
    <link type="text/css" rel="stylesheet" href="vendors/iCheck/skins/all.css">
    <link type="text/css" rel="stylesheet" href="vendors/jquery-notific8/jquery.notific8.min.css">
    <link type="text/css" rel="stylesheet" href="vendors/bootstrap-daterangepicker/daterangepicker-bs3.css">

    <!--Stylesheets -->
    <link type="text/css" rel="stylesheet" href="css/style.css">
    <link type="text/css" rel="stylesheet" href="css/style-responsive.css">
</head>
<body class="sidebar-collapsed">
    <div>
        <!--BACK TO TOP BEGINS -->
        <a id="totop" href="#"><i class="fa fa-angle-up"></i></a>
        <!--BACK TO TOP ENDS-->
        <!-- TOP BAR STARTS -->
        <div id="header-topbar-option-demo" class="page-header-topbar">
            <nav id="topbar" role="navigation" style="margin-bottom: 0; z-index: 2;" class="navbar navbar-default navbar-static-top">
                <div class="topbar-main">
                    <!-- APP TITLE STARTS -->
                    <a class="titlearea" href="index.html"><img src="images/logo-uas.png" title="UASB" height="40" width="40" />&nbsp; AMEYA: SUJALA</a>
                    <!-- APP TITLE ENDS -->
                    <!-- USER NAV STARTS -->
                    <ul class="nav navbar navbar-top-links navbar-right mbn">
                        <li class="dropdown topbar-user">
                            <a data-hover="dropdown" href="#" class="dropdown-toggle">
                                <img src="images/user-icon.jpg" title="User name" class="img-responsive img-circle" />&nbsp;
                                <span class="hidden-xs">Welcome &lt; user name &gt;</span>&nbsp;<span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu dropdown-user pull-right">
                                <li><a href="settings.html"><i class="fa fa-user"></i>Settings</a></li>
                                <li><a href="signin.html"><i class="fa fa-key"></i>Log Out</a></li>
                            </ul>
                        </li>
                    </ul>
                    <!-- USER NAV ENDS -->
                </div>
            </nav>
        </div>
        <!-- TOP BAR ENDS -->
        <div id="wrapper">
            <!--PAGE WRAPPER BEGINS-->
            <div id="page-wrapper">
                <!-- TITLE & BREADCRUMB PAGE BEGINS-->
                <div id="title-breadcrumb-option-demo" class="page-title-breadcrumb">
                    <div class="page-header pull-left">
                        <div class="page-title"><a href="index.html"><i class="fa fa-home"></i></a>&nbsp;&nbsp;<i class="fa fa-angle-right"></i> Borrowing Status</div>
                    </div>
                    <!-- QUICK LINKS STARTS-->
                    <div class="col-md-4 pull-right" style="padding-top:10px;">
                        <div class="form-group">
                            <select id="selqkLinks" class="form-control-qlinks" onchange="location=this.options[this.selectedIndex].value;">
                                <option value="">Quick Links</option>
                                <option value="input1-2general-info.html">General Information</option>
                                <option value="input3-sociological-demographic-info.html">Sociological &amp; Demographic Information</option>
                                <option value="input4-type-of-house.html">Type of House</option>
                                <option value="input5-durable-assets.html">Durable Assets</option>
                                <option value="input6-farm-implements.html">Farm Implements</option>
                                <option value="input7-livestock-animal-possession.html">Livestock &amp; Animal Possession</option>
                                <option value="input8-labour-availability-and-migration-details.html">Labour availability &amp; Migration</option>
                                <option value="input9-land-holding-survey-numbers.html">Land Holding &amp; Survey Numbers</option>
                                <option value="input10-irrigation-source-water-quality.html">Irrigation Source & Water Quality</option>
                                <option value="input12-cropping-pattern-intensity.html">Cropping Pattern & Intensity</option>
                                <option value="input13-borrowing-status.html">Borrowing Status</option>
                                <option value="input14-cost-of-production.html">Cost of Production</option>
                                <option value="input15-cost-of-production-on-subsidiary-enterprises.html">Cost of Production on Subsidiary Enterprises</option>
                                <option value="input16-fodder-availability.html">Fodder availability</option>
                                <option value="input17-family-annual-income.html">Family Annual Income</option>
                                <option value="input18-horticulture-forest-species.html">Horticulture &amp; Forest Species</option>
                                <option value="input19-additional-investment-capacity.html">Additional Investment Capacity</option>
                                <option value="input20-marketing-of-produce.html">Utilisation of Produce</option>
                                <option value="input21-awareness-of-watershed.html">Watershed Awareness</option>
                                <option value="input22-soil-water-conservation-practices.html">Soil and Water Conservation Practices</option>
                                <option value="input23-access-to-basic-needs.html">Access to Basic Needs</option>
                                <option value="input24-farming-constraints.html">Farming Constraints </option>
                                <option value="input25-adequacy-self-sufficiency-food-materials-for-households.html">Adequacy &amp; Self Sufficiency</option>
                                <option value="input26-watershed-improvement-suggestions.html">Watershed Improvement Suggestions</option>
                                <option value="input27-watershed-comments.html">Watershed Comments</option>
                            </select>
                        </div>
                    </div>
                    <!-- QUICK LINKS ENDS-->
                    <div class="clearfix"></div>
                </div>
                <!--TITLE & BREADCRUMB PAGE END-->
                <!-- CONTENT STARTS -->
                <div class="page-content">
                    <!-- PRE-SELECTED ITEMS STARTS -->
                    <div class="col-lg-12">
                        <div class="note note-info">
                            <div class="row mbm">
                            <div class="col-lg-3">
                                <span>Name of the District:</span> <strong><span id="disp_dist"> </span></strong>
                            </div>
                            <div class="col-lg-3">
                                <span>Name of the Taluk: </span><strong><span id="disp_taluk"></span></strong>
                            </div>
                            <div class="col-lg-3">
                                <span>Name of the Hobli: </span><strong><span id="disp_hobli"></span></strong>
                            </div>
                            <div class="col-lg-3">
                                <span>Name of the Sub-watershed: </span><strong><span id="disp_sws"></span></strong>
                            </div>
                            <div class="col-lg-3">
                                <span>Sub-watershed code: </span><strong><span id="disp_swsCode"> </span></strong>
                            </div>
                            <div class="col-lg-3">
                                <span>Name of Micro-watershed: </span><strong><span id="disp_mws"></span></strong>
                            </div>
                            <div class="col-lg-3">
                                <span>Micro-watershed code: </span><strong><span id="disp_mwscode"> </span></strong>
                            </div>
                            <div class="col-lg-3">
                                <span>Village Name: </span><strong><span id="disp_village"></span></strong>
                            </div>
                            </div>
                        </div>
                    </div>
                    <!-- PRE-SELECTED ITEMS ENDS -->
                    <!-- INPUT TABLES STARTS -->
                    <div id="table-action" class="row">
                        <div class="col-lg-12">
                            <div class="tab-content">
                                <div class="table-responsive">
                                    <table class="table table-hover table-striped table-bordered table-advanced tablesorter">
                                        <thead>
                                            <tr>
                                                <th>Components</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Bank account </td>
                                                <td>

                                                    <select id="bankAccAvail" class="form-control">
                                                    	<option value="Yes">Yes</option>
                                                        <option value="No">No</option>
                                                    </select>

                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Do you have any savings?</td>
                                                <td>
                                                    <select id="savingsAvail" class="form-control">
                                                    	<option value="Yes">Yes</option>
                                                        <option value="No">No</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Credit Availed</td>
                                                <td>
                                                	<select id="creditAvail" class="form-control">
                                                    	<option value="No">No</option>
                                                        <option value="Yes">Yes</option>
                                                        
                                                    </select>
                                                    </div><br />
                                                    <div>

                                                        
                                                    </div>
                                                </td>
                                            </tr>
                                    </table>
                                </div>
								<div id="enablediv" style="display:none;">
                                <div class="table-responsive">
                                    <table class="table table-hover table-striped table-bordered table-advanced tablesorter">
                                        <thead>
                                            <tr>
                                                <th>Institutional Source</th>
                                                <th>Amount (Rs.)</th>
                                                <th>Rate of Interest</th>
                                                <th>Purpose</th>
                                                <th>Repayment status</th>
                                                <th>Reactions</th>
                                                <th style="width:75px;">Delete</th>
                                            </tr>
                                        </thead>
                                        <tbody id="addingTree">
                                        <input type="hidden" id="treeCounter" name="itemCounter" value="0">
                                            <tr id="addedFamily">
                                                <td>
                                                    <select id="txtInstSource" class="form-control" name="txtInstSource[]">
                                                        <option value="">Select</option>
                                                   
                                                    </select>
                                                </td>
                                                <td><input id="txtInstSourceAmt" name="txtInstSourceAmt[]" type="number" min="0" placeholder="" class="form-control" /></td>
                                                <td>
                                                    <input id="txtInstSourceROI" name="txtInstSourceROI[]" type="number" min="0" placeholder="" class="form-control" />
                                                </td>
                                                <td>
                                                    <select id="txtInstSourcePurpose" name="txtInstSourcePurpose[]" class="form-control">
                                                        <option value="">Select</option>

                                                    </select>
                                                </td>
                                                <td>
                                                    <select id="txtInstSourcePayStatus" name="txtInstSourcePayStatus[]" class="form-control">
                                                        <option value="">Select</option>
                                                     
                                                    </select>
                                                </td>
                                                <td>
                                                    <select id="selInstSourceReactions" name="selInstSourceReactions[]" class="form-control">
                                                        <option value="">Select</option>
                                                     
                                                    </select>
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-default btn-xs">
                                                        <i class="fa fa-trash-o"></i>&nbsp;
                                                        Delete
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                    </table>
                                </div>
                                <!-- buttons starts -->
                                <div class="pull-left" style="margin-bottom:30px;">
                                    <button type="button" class="btn btn-violet" id="btnfamilyAdd">Add New</button>
                                </div>

                                <div class="table-responsive">
                                    <table class="table table-hover table-striped table-bordered table-advanced tablesorter">
                                        <thead>
                                            <tr>
                                                <th>Private Source</th>
                                                <th>Amount (Rs.)</th>
                                                <th>Rate of Interest</th>
                                                <th>Purpose</th>
                                                <th>Repayment status</th>
                                                <th>Reactions</th>
                                                <th style="width:75px;">Delete</th>
                                            </tr>
                                        </thead>
                                        <tbody id="addingTreeOne">
                                        <input type="hidden" id="treeCounterOne" name="itemCounter" value="0">
                                            <tr id="addedFamilyOne">
                                                <td>
                                                    <select id="txtPvtSource" name="txtPvtSource[]" class="form-control">
                                                        <option value="">Select</option>
                                                       
                                                    </select>
                                                </td>
                                                <td><input id="txtPvtSourceAmt" name="txtPvtSourceAmt[]" type="number" min="0" placeholder="" class="form-control" /></td>
                                                <td>
                                                    <input id="txtPvtSourceROI" name="txtPvtSourceROI[]" type="number" min="0" placeholder="" class="form-control" />
                                                </td>
                                                <td>
                                                    <select id="txtPvtSourcePurpose" name="txtPvtSourcePurpose[]" class="form-control">
                                                        <option value="">Select</option>

                                                    </select>
                                                </td>
                                                <td>
                                                    <select id="txtPvtSourcePayStatus" name="txtPvtSourcePayStatus[]" class="form-control">
                                                        <option value="">Select</option>
                                                       
                                                    </select>
                                                </td>
                                                <td>
                                                    <select id="selPvtSourceReactions" name="selPvtSourceReactions[]" class="form-control">
                                                        <option value="">Select</option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-default btn-xs">
                                                        <i class="fa fa-trash-o"></i>&nbsp;
                                                        Delete
                                                    </button>
                                                </td>
                                            </tr>
                                          </tbody>
                                    </table>
                                </div>
                                <!-- buttons starts -->
                                <div class="pull-left" style="margin-bottom:5px;">
                                    <button type="button" class="btn btn-violet" id="btnfamilyAddOne">Add New</button>
                                </div>
                                
                                </div>
                                
                                <div class="pull-right">
                                    <button type="button" id="btnBackBorrowStatus" class="btn btn-blue" onclick="prevPage()">< Back</button> &nbsp;
                                    <button type="button" id="btnResetBorrowStatus" class="btn btn-primary">Reset</button> &nbsp;
                                    <button type="submit" id="btnSaveBorrowStatus" class="btn btn-green" onclick="saveOnly()">Save</button> &nbsp;
                                    <button type="button" id="btnNextBorrowStatus" class=" btn btn-blue" onclick="save_current_form()">Next ></button>
                                </div>
                                <!-- buttons ends -->
                            </div>
                        </div>
                    </div>
                    <!--END CONTENT-->
                </div>
                <!--BEGIN FOOTER-->
                <div id="footer">
                    <div class="copyright">2016 © Directorate of Research, UAS, Bengaluru</div>
                </div>
                <!--END FOOTER--><!--END PAGE WRAPPER-->
            </div>
        </div>
    </div>
    <!-- JQUERY -->
    <script src="js/jquery-1.10.2.min.js"></script>
    <script src="js/jquery-migrate-1.2.1.min.js"></script>
    <script src="js/jquery-ui.js"></script>
	<script src="js/config.js"></script>

    <!--BOOTSTRAP JS-->
    <script src="vendors/bootstrap/js/bootstrap.min.js"></script>
    <script src="vendors/bootstrap-hover-dropdown/bootstrap-hover-dropdown.js"></script>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <script src="vendors/metisMenu/jquery.metisMenu.js"></script>
    <script src="vendors/slimScroll/jquery.slimscroll.js"></script>
    <script src="vendors/jquery-cookie/jquery.cookie.js"></script>
    <script src="vendors/iCheck/icheck.min.js"></script>
    <script src="vendors/iCheck/custom.min.js"></script>
    <script src="vendors/jquery-notific8/jquery.notific8.min.js"></script>
    <script src="vendors/jquery-highcharts/highcharts.js"></script>
    <script src="js/jquery.menu.js"></script>
    <script src="vendors/holder/holder.js"></script>
    <script src="vendors/responsive-tabs/responsive-tabs.js"></script>
    <script src="vendors/jquery-news-ticker/jquery.newsTicker.min.js"></script>
    <script src="vendors/moment/moment.js"></script>
    <script src="vendors/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script src="vendors/bootstrap-daterangepicker/daterangepicker.js"></script>

    <!--CORE JAVASCRIPT-->
    <script src="js/main.js"></script>

    <!--LOADING SCRIPTS FOR PAGE-->
    <script src="js/table-action.js"></script>
    <script type="text/javascript" >





	/* add rows */

function childRecursive(element, func){
    // Applies that function to the given element.
    func(element);
    var children = element.children();
    if (children.length > 0) {
        children.each(function (){
            // Applies that function to all children recursively
            childRecursive($(this), func);
        });
    }
}

// Expects format to be xxx-#[-xxxx] (e.g. item-1 or item-1-name)
function getNewAttr(str, newNum){
    // Split on -
    var arr = str.split('');
    // Change the 1 to wherever the incremented value is in your id
    arr[1] = newNum;
    // Smash it back together and return
    return arr.join('');
}

// Written with Twitter Bootstrap form field structure in mind
// Checks for id, name, and for attributes.
function setCloneAttr(element, value){
    // Check to see if the element has an id attribute
    if (element.attr('id') !== undefined){
        // If so, increment it
        element.attr('id', getNewAttr(element.attr('id'),value));
    } else { /*If for some reason you want to handle an else, here you go */}
    // Do the same with name...
    if(element.attr('name') !== undefined){
       // element.attr('name', getNewAttr(element.attr('name'),value));
    } else {}
    // And don't forget to show some love to your labels.
    if (element.attr('for') !== undefined){
        element.attr('for', getNewAttr(element.attr('for'),value));
    } else {}
}

// Sets an element's value to ''
function clearCloneValues(element){
    if (element.attr('value') !== undefined){
        element.val('');
    }
}

//$(document).ready(function(){
    $('#btnfamilyAdd').click(function(){
        //increment the value of our counter
       $('#treeCounter').val(Number($('#treeCounter').val()) + 1);
        //clone the first .item element
        var newItem = $('tr#addedFamily').first().clone();
        //recursively set our id, name, and for attributes properly
        childRecursive(newItem,
            // Remember, the recursive function expects to be able to pass in
            // one parameter, the element.
            function(e){
                setCloneAttr(e, $('#treeCounter').val());
        });
        // Clear the values recursively
        childRecursive(newItem,
            function clearCloneValues(e){
              
					if(e.attr('type')==='text' || e.attr('type')==='number')
					e.val('');
				});
        // Finally, add the new div.item to the end
        newItem.appendTo($('#addingTree'));
		//$('#addingTree').append(fetch_data());
		
    });



function deleteTable(btndel) {
    if (typeof(btndel) == "object") {
        $(btndel).closest("tr").remove();
    } else {
        return false;
    }
}

	/* add rows */

function childRecursive(element, func){
    // Applies that function to the given element.
    func(element);
    var children = element.children();
    if (children.length > 0) {
        children.each(function (){
            // Applies that function to all children recursively
            childRecursive($(this), func);
        });
    }
}

// Expects format to be xxx-#[-xxxx] (e.g. item-1 or item-1-name)
function getNewAttr(str, newNum){
    // Split on -
    var arr = str.split('');
    // Change the 1 to wherever the incremented value is in your id
    arr[1] = newNum;
    // Smash it back together and return
    return arr.join('');
}

// Written with Twitter Bootstrap form field structure in mind
// Checks for id, name, and for attributes.
function setCloneAttr(element, value){
    // Check to see if the element has an id attribute
    if (element.attr('id') !== undefined){
        // If so, increment it
        element.attr('id', getNewAttr(element.attr('id'),value));
    } else { /*If for some reason you want to handle an else, here you go */}
    // Do the same with name...
    if(element.attr('name') !== undefined){
       // element.attr('name', getNewAttr(element.attr('name'),value));
    } else {}
    // And don't forget to show some love to your labels.
    if (element.attr('for') !== undefined){
        element.attr('for', getNewAttr(element.attr('for'),value));
    } else {}
}

// Sets an element's value to ''
function clearCloneValues(element){
    if (element.attr('value') !== undefined){
        element.val('');
    }
}

//$(document).ready(function(){
    $('#btnfamilyAddOne').click(function(){
        //increment the value of our counter
       $('#treeCounterOne').val(Number($('#treeCounterOne').val()) + 1);
        //clone the first .item element
        var newItem = $('tr#addedFamilyOne').first().clone();
        //recursively set our id, name, and for attributes properly
        childRecursive(newItem,
            // Remember, the recursive function expects to be able to pass in
            // one parameter, the element.
            function(e){
                setCloneAttr(e, $('#treeCounterOne').val());
        });
        // Clear the values recursively
        childRecursive(newItem,
            function clearCloneValues(e){
              
					if(e.attr('type')==='text' || e.attr('type')==='number')
					e.val('');
				});
        // Finally, add the new div.item to the end
        newItem.appendTo($('#addingTreeOne'));
		//$('#addingTree').append(fetch_data());
		
    });





    /* fetch json data */

	var borrowingtype_val = JSON.parse(localStorage.getItem('borrowingtype_det'));

	var borrowingtype_html='';
	$.each(borrowingtype_val,function(i,itm){
		borrowingtype_html +='<option value="'+ itm.borrowingPurposeId+'">'+itm.borrowingPurpose+'</option>';
	});
	$('#txtInstSourcePurpose').html(borrowingtype_html).trigger('liszt:updated');
	$('#txtPvtSourcePurpose').html(borrowingtype_html).trigger('liszt:updated');






//display name of the district

var dist_val = JSON.parse(localStorage.getItem('dist_det'));
var district_vue = JSON.parse(localStorage.getItem('selDistrict'));
var store_dist = get_current_data(dist_val,'dist_id','dist_name',district_vue);
	$('#disp_dist').html(store_dist);
	
	
//display taluk	
	
var taluk_val = JSON.parse(localStorage.getItem('taluk_det'));
var taluk_vue = JSON.parse(localStorage.getItem('selTaluk'));
var store_taluk = get_current_data(taluk_val,'taluk_id','talukName',taluk_vue);
	$('#disp_taluk').html(store_taluk);	


//Display hobli

var hobli_val = JSON.parse(localStorage.getItem('hobli_det'));
var hobli_vue = JSON.parse(localStorage.getItem('selHobli'));
var store_hobli = get_current_data(hobli_val,'hobliId','hobliName',hobli_vue);
	$('#disp_hobli').html(store_hobli);	
	
//Display Sub Water shed code

var swsCode_val = JSON.parse(localStorage.getItem('subwatershed_det'));
var swsCode_vue = JSON.parse(localStorage.getItem('selSWSCode'));
var store_swsCode = get_current_data(swsCode_val,'subwatershedId','subwatershedCode',swsCode_vue);
	$('#disp_swsCode').html(store_swsCode);	
	
//display subwatershed name
	
var sws_val = JSON.parse(localStorage.getItem('subwatershed_det'));
var sws_vue = JSON.parse(localStorage.getItem('selSWSName'));
var store_sws = get_current_data(sws_val,'subwatershedId','subwatershedName',sws_vue);

	$('#disp_sws').html(store_sws);	
	
//display Micro water Shed	
	
var mws_val = JSON.parse(localStorage.getItem('microwatershed_det'));
var mws_vue = JSON.parse(localStorage.getItem('selMWSName'));
var store_mws = get_current_data(mws_val,'microwatershedId','microwatershedName',mws_vue);
	$('#disp_mws').html(store_mws);
	
//display Micro water Shed	code
	
var mwsCode_val = JSON.parse(localStorage.getItem('microwatershed_det'));
var mwsCode_vue = JSON.parse(localStorage.getItem('selMWSCode'));
var store_mwsCode = get_current_data(mwsCode_val,'microwatershedId','microwatershedCode',mwsCode_vue);
	$('#disp_mwscode').html(store_mwsCode);		


//display village name 

var village_val = JSON.parse(localStorage.getItem('village_det'));
var village_vue = JSON.parse(localStorage.getItem('selVillage'));
var store_village = get_current_data(village_val,'villageId','villageName',village_vue);
	$('#disp_village').html(store_village);



function get_current_data(arrval,keyid,keyname,keyval)
{
	var valname = '';
	for (var i = 0; i < arrval.length; i++) {
		
    if( arrval[i][keyid]==keyval){

		return valname = arrval[i][keyname];
		return false;
	 }
	}
	
}

	
	
	
	
	// fetch JSON data
	
	var borrowing_val = JSON.parse(localStorage.getItem('borrowingtype_det'));
	var globeInst = [{'instId':'1', 'instName':'Commercial Bank'}, {'instId':'2', 'instName':'Grameen Bank'}, {'instId':'3', 'instName':'Cooperative Bank'}];
	var globePvt = [{'pvtId':'1', 'pvtName':'Friends/Relatives'}, {'pvtId':'2', 'pvtName':'Money Lenders'}, {'pvtId':'3', 'pvtName':'Traders'}, {'pvtId':'4', 'pvtName':'Input Dealers/Suppliers'}, {'pvtId':'5', 'pvtName':'SHGs CBOs'}];
	var repayStaInst = [{'repayInId':'1', 'repayInName':'Unpaid'}, {'repayInId':'2', 'repayInName':'Partially Paid'}, {'repayInId':'3', 'repayInName':'Fully Paid'}];
	var repayStaPvt = [{'repayPvtId':'1', 'repayPvtName':'Unpaid'}, {'repayPvtId':'2', 'repayPvtName':'Partially Paid'}, {'repayPvtId':'3', 'repayPvtName':'Fully Paid'}];
	var reactInst = [{'inReacId':'1', 'inReacName':'Timely Agricultural Operation'}, {'inReacId':'2', 'inReacName':'Easy Access'}, {'inReacId':'3', 'inReacName':'Amount as per requirement'}, {'inReacId':'4', 'inReacName':'High rate of interest'}, {'inReacId':'5', 'inReacName':'Sell the Produce at Low price'},];
	var reactPvt = [{'pvtReacId':'1', 'pvtReacName':'Timely Agricultural Operation'}, {'pvtReacId':'2', 'pvtReacName':'Easy Access'}, {'pvtReacId':'3', 'pvtReacName':'Amount as per requirement'}, {'pvtReacId':'4', 'pvtReacName':'High rate of interest'}, {'pvtReacId':'5', 'pvtReacName':'Sell the Produce at Low price'}];
	var bankAccount = [{'bacId':'1', 'bacVal':'Yes'}, {'bacId':'2', 'bacVal':'No'}];
	var savingAccount = [{'savId':'1', 'savVal':'Yes'}, {'savId':'2', 'savVal':'No'}];
	var credAvail = [{'credId':'1', 'credVal':'Yes'}, {'credId':'2', 'credVal':'No'}];


	var bankvar ='';
	bankvar += '<option value="">Select</option>';
			$.each(globeInst,function(j,itm){
						bankvar +='<option value="'+ itm.instId+'">'+itm.instName+'</option>';
				});
		$('#txtInstSource').html(bankvar).trigger('liszt:updated');

	var PayStatusval ='';
	PayStatusval += '<option value="">Select</option>';
			$.each(repayStaPvt,function(j,itm){
						PayStatusval +='<option value="'+ itm.repayPvtId+'">'+itm.repayPvtName+'</option>';
				});
	$('#txtInstSourcePayStatus').html(PayStatusval).trigger('liszt:updated');

	var inReacNameval ='';
	inReacNameval += '<option value="">Select</option>';
			$.each(reactInst,function(j,itm){
						inReacNameval +='<option value="'+ itm.inReacId+'">'+itm.inReacName+'</option>';
				});
	$('#selInstSourceReactions').html(inReacNameval).trigger('liszt:updated');
		

	// Second table
	var pvtval ='';
	inReacNameval += '<option value="">Select</option>';
			$.each(globePvt,function(j,itm){
						pvtval +='<option value="'+ itm.pvtId+'">'+itm.pvtName+'</option>';
				});
	$('#txtPvtSource').html(pvtval).trigger('liszt:updated');
		
	
	var PayStatusval ='';
	PayStatusval += '<option value="">Select</option>';
			$.each(repayStaPvt,function(j,itm){
						PayStatusval +='<option value="'+ itm.repayPvtId+'">'+itm.repayPvtName+'</option>';
				});
	$('#txtPvtSourcePayStatus').html(PayStatusval).trigger('liszt:updated');

	var inReacNameval ='';
	inReacNameval += '<option value="">Select</option>';
			$.each(reactInst,function(j,itm){
						inReacNameval +='<option value="'+ itm.inReacId+'">'+itm.inReacName+'</option>';
				});
	$('#selPvtSourceReactions').html(inReacNameval).trigger('liszt:updated');
		

function saveOnly() {
	
	var bankAccAvail = document.getElementById("bankAccAvail").value;
	var savingsAvail = document.getElementById("savingsAvail").value;
	var creditAvail = document.getElementById("creditAvail").value;

	
	var txtInstSource = [];
  $('select[name="txtInstSource[]"]').map(function(index, val) {
			 if($(val).val()!="")
			 txtInstSource[index] = ($(val).val());
	    });
		
	var txtInstSourceAmt = [];
  $('input[name="txtInstSourceAmt[]"]').each(function() {
			 if($(this).val()!="")
			 txtInstSourceAmt.push($(this).val());
	    });	
		
	var txtInstSourceROI = [];
  $('input[name="txtInstSourceROI[]"]').each(function() {
			 if($(this).val()!="")
			 txtInstSourceROI.push($(this).val());
	    });
		
		
	var txtInstSourcePurpose = [];
  $('select[name="txtInstSourcePurpose[]"]').map(function(index, val) {
			 if($(val).val()!="")
			 txtInstSourcePurpose[index] = ($(val).val());
	    });
		
		
	var txtInstSourcePayStatus = [];
  $('select[name="txtInstSourcePayStatus[]"]').map(function(index, val) {
			 if($(val).val()!="")
			 txtInstSourcePayStatus[index] = ($(val).val());
	    });
		
	var selInstSourceReactions = [];
  $('select[name="selInstSourceReactions[]"]').map(function(index, val) {
			 if($(val).val()!="")
			 selInstSourceReactions[index] = ($(val).val());
	    });

	var txtPvtSource = [];
  $('select[name="txtPvtSource[]"]').map(function(index, val) {
			 if($(val).val()!="")
			 txtPvtSource[index] = ($(val).val());
	    });		
		
		
	var txtPvtSourceAmt = [];
  $('input[name="txtPvtSourceAmt[]"]').each(function() {
			 if($(this).val()!="")
			 txtPvtSourceAmt.push($(this).val());
	    });
		
		
	var txtPvtSourceROI = [];
  $('input[name="txtPvtSourceROI[]"]').each(function() {
			 if($(this).val()!="")
			 txtPvtSourceROI.push($(this).val());
	    });
	
	
	var txtPvtSourcePurpose = [];
  $('select[name="txtPvtSourcePurpose[]"]').map(function(index, val) {
			 if($(val).val()!="")
			 txtPvtSourcePurpose[index] = ($(val).val());
	    });	
		
		
		
	var txtInstSourcePayStatus = [];
  $('select[name="txtInstSourcePayStatus[]"]').map(function(index, val) {
			 if($(val).val()!="")
			 txtInstSourcePayStatus[index] = ($(val).val());
	    });	
		
	var selPvtSourceReactions = [];
  $('select[name="selPvtSourceReactions[]"]').map(function(index, val) {
			 if($(val).val()!="")
			 selPvtSourceReactions[index] = ($(val).val());
	    });	
		
		
		
	set_storage_item('bankAccAvail',bankAccAvail);
	set_storage_item('savingsAvail',savingsAvail);
	set_storage_item('creditAvail',creditAvail);
	set_storage_item('txtInstSource',txtInstSource);
	set_storage_item('txtInstSourceAmt',txtInstSourceAmt);
	set_storage_item('txtInstSourceROI',txtInstSourceROI);
	set_storage_item('txtInstSourcePurpose',txtInstSourcePurpose);
	set_storage_item('selInstSourceReactions',selInstSourceReactions);
	set_storage_item('txtInstSourcePayStatus',txtInstSourcePayStatus);
	set_storage_item('txtPvtSource',txtPvtSource);
	set_storage_item('txtPvtSourceAmt',txtPvtSourceAmt);
	set_storage_item('txtPvtSourceROI',txtPvtSourceROI);
	set_storage_item('txtPvtSourcePurpose',txtPvtSourcePurpose);
	set_storage_item('txtPvtSourcePayStatus',txtPvtSourcePayStatus);
	set_storage_item('selPvtSourceReactions',selPvtSourceReactions);

}
	
function save_current_form()
{



  saveOnly();

  location.href= 'input14-cost-of-production.html';

}

function prevPage(){

  saveOnly();

  location.href= 'input12-cropping-pattern-intensity.html';	

	}
	
function set_storage_item(itm,val)
{
	window.localStorage.setItem(itm,val);
}


// back process

	var cur_bankAccAvail_val = localStorage.getItem('bankAccAvail');
	var cur_savingsAvail_val = localStorage.getItem('savingsAvail');
	var cur_creditAvail_val = localStorage.getItem('creditAvail');
	var cur_txtInstSource_val = localStorage.getItem('txtInstSource');
	var cur_txtInstSourceAmt_val = localStorage.getItem('txtInstSourceAmt');
	var cur_txtInstSourceROI_val = localStorage.getItem('txtInstSourceROI');
	var cur_txtInstSourcePurpose_val = localStorage.getItem('txtInstSourcePurpose');
	var cur_selInstSourceReactions_val = localStorage.getItem('selInstSourceReactions');
	var cur_txtInstSourcePayStatus_val = localStorage.getItem('txtInstSourcePayStatus');
	var cur_txtPvtSource_val = localStorage.getItem('txtPvtSource');
	var cur_txtPvtSourceAmt_val = localStorage.getItem('txtPvtSourceAmt');
	var cur_txtPvtSourceROI_val = localStorage.getItem('txtPvtSourceROI');
	var cur_txtPvtSourcePurpose_val = localStorage.getItem('txtPvtSourcePurpose');
	var cur_txtPvtSourcePayStatus_val = localStorage.getItem('txtPvtSourcePayStatus');
	var cur_selPvtSourceReactions_val = localStorage.getItem('selPvtSourceReactions');
	
	
	if(cur_txtInstSource_val.length > 0)
			{
				$('#addingTree').html('');
				var curInsSrcval = cur_txtInstSource_val.split(',');
				var curInsAmtval = cur_txtInstSourceAmt_val.split(',');
				var curInsROIval = cur_txtInstSourceROI_val.split(',');
				var curInsPurval = cur_txtInstSourcePurpose_val.split(',');
				var curInsSrcRecval = cur_selInstSourceReactions_val.split(',');
				var curinsPayStval = cur_txtInstSourcePayStatus_val.split(',');
				var fhtml ='';
				
				 for (var i = 0; i < curInsSrcval.length; i++) {
						
						
						fhtml += '<tr id="addedFamily">';
						fhtml += '<td><select id="txtInstSource" class="form-control" name="txtInstSource[]">';
						fhtml += '		<option value="">Select</option>';
						$.each(globeInst,function(j,itm){
									var selInst ='';
									if(curInsSrcval[i]==itm.instId)
									{
										selInst="selected='selected'";	
									}
									
									fhtml +='<option value="'+ itm.instId+'" '+selInst+'>'+itm.instName+'</option>';
							});
						fhtml += '</select></td>';
						fhtml += '<td><input type="text" id="" min="0" id="txtInstSourceAmt" name="txtInstSourceAmt[]" value="'+curInsAmtval[i]+'" class="form-control" /></td>';
						fhtml += '<td><input type="text" id="" min="0" id="txtInstSourceROI" name="txtInstSourceROI[]" value="'+curInsROIval[i]+'" class="form-control" /></td>';						
						fhtml += '<td><select id="txtInstSourcePurpose" name="txtInstSourcePurpose[]" class="form-control">';
						fhtml += '		<option value="">Select</option>';
								
								$.each(borrowingtype_val,function(k,itm){
									var selpurp ='';
									if(curInsPurval[i]==itm.borrowingPurposeId)
									{
										selpurp="selected='selected'";
											
									}
									fhtml +='<option value="'+ itm.borrowingPurposeId+'" '+selpurp+'>'+itm.borrowingPurpose+'</option>';
							});
						fhtml += '</select></td>';
						fhtml += '<td><select id="txtInstSourcePayStatus" class="form-control" name="txtInstSourcePayStatus[]">';
						fhtml += '		<option value="">Select</option>';
						$.each(repayStaInst,function(j,itm){
									var selInRep ='';
									if(curinsPayStval[i]==itm.repayInId)
									{
										selInRep="selected='selected'";	
									}
									
									fhtml +='<option value="'+ itm.repayInId+'" '+selInRep+'>'+itm.repayInName+'</option>';
							});
						fhtml += '</select></td>';
						fhtml += '<td><select id="selInstSourceReactions" class="form-control" name="selInstSourceReactions[]">';
						fhtml += '		<option value="">Select</option>';
						$.each(reactInst,function(j,itm){
									var selInReq ='';
									if(curInsSrcRecval[i]==itm.inReacId)
									{
										selInReq="selected='selected'";	
									}
									
									fhtml +='<option value="'+ itm.inReacId+'" '+selInReq+'>'+itm.inReacName+'</option>';
							});
						fhtml += '</select></td>';
						fhtml += '<td><button type="button" class="btn btn-default btn-xs"><i class="fa fa-trash-o"></i>&nbsp;Delete</button></td></tr>';
				 }

				 $('#addingTree').append(fhtml);
			}
			
	
	if(cur_txtPvtSource_val.length > 0)
	{
		$('#addingTreeOne').html('');
		var curPvtSrcval = cur_txtPvtSource_val.split(',');
		var curPvtAmtval = cur_txtPvtSourceAmt_val.split(',');
		var curPvtROIval = cur_txtPvtSourceROI_val.split(',');
		var curPvtPurval = cur_txtPvtSourcePurpose_val.split(',');
		var curPvtSrcRecval = cur_txtPvtSourcePayStatus_val.split(',');
		var curPvtPayStval = cur_selPvtSourceReactions_val.split(',');
		var fhtml ='';
		
		 for (var i = 0; i < curPvtSrcval.length; i++) {
			
				fhtml += '<tr id="addedFamilyOne">';
				fhtml += '<td><select id="txtPvtSource" class="form-control" name="txtPvtSource[]">';
				fhtml += '		<option value="">Select</option>';
				$.each(globePvt,function(j,itm){
							var selPvt ='';
							if(curPvtSrcval[i]==itm.pvtId)
							{
								selPvt="selected='selected'";	
							}
							
							fhtml +='<option value="'+ itm.pvtId+'" '+selPvt+'>'+itm.pvtName+'</option>';
					});
				fhtml += '</select></td>';
				fhtml += '<td><input type="text" id="" min="0" id="txtPvtSourceAmt" name="txtPvtSourceAmt[]" value="'+curInsAmtval[i]+'" class="form-control" /></td>';
				fhtml += '<td><input type="text" id="" min="0" id="txtPvtSourceROI" name="txtPvtSourceROI[]" value="'+curInsROIval[i]+'" class="form-control" /></td>';						
				fhtml += '<td><select id="txtPvtSourcePurpose" name="txtPvtSourcePurpose[]" class="form-control">';
				fhtml += '		<option value="">Select</option>';
						
						$.each(borrowingtype_val,function(k,itm){
							var selpurpvt ='';
							if(curPvtPurval[i]==itm.borrowingPurposeId)
							{
								selpurpvt="selected='selected'";
									
							}
							fhtml +='<option value="'+ itm.borrowingPurposeId+'" '+selpurpvt+'>'+itm.borrowingPurpose+'</option>';
					});
				fhtml += '</select></td>';
				fhtml += '<td><select id="txtPvtSourcePayStatus" class="form-control" name="txtPvtSourcePayStatus[]">';
				fhtml += '		<option value="">Select</option>';
				$.each(repayStaPvt,function(j,itm){
							var selpvtRep ='';
							if(curInsSrcRecval[i]==itm.repayPvtId)
							{
								selpvtRep="selected='selected'";	
							}
							
							fhtml +='<option value="'+ itm.repayPvtId+'" '+selpvtRep+'>'+itm.repayPvtName+'</option>';
					});
				fhtml += '</select></td>';
				fhtml += '<td><select id="selPvtSourceReactions" class="form-control" name="selPvtSourceReactions[]">';
				fhtml += '		<option value="">Select</option>';
				$.each(reactPvt,function(j,itm){
							var selpvtReq ='';
							if(curInsSrcRecval[i]==itm.pvtReacId)
							{
								selpvtReq="selected='selected'";	
							}
							
							fhtml +='<option value="'+ itm.pvtReacId+'" '+selpvtReq+'>'+itm.pvtReacName+'</option>';
					});
				fhtml += '</select></td>';
				fhtml += '<td><button type="button" class="btn btn-default btn-xs"><i class="fa fa-trash-o"></i>&nbsp;Delete</button></td></tr>';
				
		 }

		 $('#addingTreeOne').append(fhtml);
	}			
			
	//hide show process
	if(cur_creditAvail_val)
	{
		if(cur_creditAvail_val=='Yes')
		{
			 $("#creditAvail").val('Yes').attr('selected', true);
			$("#enablediv").css("display", "");
			
		}
		else if(cur_creditAvail_val=='No')
		{
			 $("#creditAvail").val('No').attr('selected', true);
			$("#enablediv").css("display", "none");
		}
	}

	$('#creditAvail').change(function(){	
		var selVal = $(this).val();
		if(selVal=='Yes')
		{
			$("#enablediv").css("display", "");
		}
		else if(selVal=='No')
		{
			$("#enablediv").css("display", "none");
		}
	});
</script>
</body>
</html>
